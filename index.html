<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="keywords" content="Adventure Games, Arcade Games, Girls Games, Shooting Games, Racing Games">
        <meta name="description" content="">
        <meta name="format-detection" content="telephone=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
        <style>
        body,html{padding:0;border:0;margin:0;height:100%;width:100%}#div_iframe_game{height:100%;width:100%;position:absolute;left:0;top:0}#iframe_game{width:100%}#ad-banner{width:100%;z-index:999;justify-content:center;display:flex;position:absolute}.loadingMc{margin:auto;width:100%;height:100%;z-index:99;position:absolute;background:#2596be}.gameIconPanret{width:140px;height:140px;border-radius:100%;overflow:hidden;position:absolute;top:50%;left:50%;margin-top:-70px;margin-left:-70px;z-index:99} .gameIcon{width:100%} .loadNumPanret{width:140px;height:140px;position:absolute;top:50%;left:50%;margin-top:100px;z-index:99}.loadMc{width:140px;height:140px;position:absolute;top:50%;left:50%;margin-top:-75px;margin-left:-75px;z-index:99;border-radius:50%;border:5px solid #FFFFF0;border-top:5px solid #08da4e;animation:load 2s linear infinite}@keyframes load{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
        </style>
        <title></title>


        <script src="https://cdn.jsdelivr.net/npm/@jolibox/sdk@1/dist/index.iife.js"></script>

        <script type="text/javascript">
            var gGame = {                   
                name: "Zoo_Boom",
                url:"./game.html",
                icon:"./icon.jpg",
				isBanner:false,
            }; 
            window.isUploadCY = !1;
            </script>
    </head>
    <body>
        <div id="loadingMc" class="loadingMc">
            
        </div>
        <div id="div_iframe_game">
            <iframe
                id="iframe_game"
                webkitallowfullscreen="true"
                mozallowfullscreen="true"
                allowfullscreen="true"
                webkit-playsinline="true"
                scrolling="no"
                seamless
                frameborder="0"
                style="display:block;overflow:hidden;"
            ></iframe>
        </div>
       <div id="ad-banner" style ="bottom: 0; height: 8%;"> 
           
        </div>
        <script>
        window.isUploadCY = !1;
       
        window.game = {
            init: function() {
           
                const div_gameIframeEl = document.getElementById('iframe_game');
 

                div_gameIframeEl.style.height = "92%";

                if(!gGame.isBanner){
                    div_gameIframeEl.style.height = "100%";
                    const adBanner = document.getElementById("ad-banner");
                    adBanner.style = "display:none";
                }

                div_gameIframeEl.src = gGame.url;
            }
        };
        window.game.init();
    
        window.loading = {  
            loadingProgerss:0,
            itervalId:0,
            init: function() {
    
                var a = document.getElementById("loadingMc");
                a.innerHTML = '<div id="loadMc" class="loadMc"></div> <div id="gameIconPanret" class="gameIconPanret"><img id="gameIcon"  src="" ></div> <div id="loadNumPanret" class="loadNumPanret"> <span id="span" style="color:  rgba(142, 204, 237, 1);font-weight: bolder;font-size: 18px;text-align: center;width: 140px;left: -70px;position:absolute;">0%</span>  </div>';
                var loadingImgEl = document.getElementById("gameIcon");
                loadingImgEl.setAttribute('src', gGame.icon);
                loadingImgEl.style.width = "100%";
                this.show();
               
            },
            show: function() {
                const loadingProgerssTxt = document.querySelector('#span');
                this.itervalId = setInterval(() => {
                    this.loadingProgerss += 1;
                    if(this.loadingProgerss >= 100){
                        clearInterval(this.itervalId);
                        this.hide();
                        if(!isUploadCY){
                            console.log("开屏广告");
                             ads.adBreak && ads.adBreak({
                                type: "preroll",
                                name: "my_preroll",
                                adBreakDone: () => {},// 也不要在这里初始化游戏，因为用户不关闭广告，则游戏无法初始化！！！
                            });
                            window.isUploadCY = !0;
                        }
                    }
                loadingProgerssTxt.innerHTML = ( Math.trunc(this.loadingProgerss)).toString() + '%'; 
                }, 80);
            },
            hide: function () {
                const loadingContainerEl = document.querySelector('#loadingMc');
                loadingContainerEl.style.display = 'none';
                clearInterval(this.itervalId);
            },
        }
        window.loading.init();
    
        const jolibox = new JoliboxSDK();
        const { ads, runtime, storage } = jolibox;

                    
            // 在游戏中初始化广告
        ads.init();

        // 在需要预加载广告的地方（例如在游戏加载屏幕中）
        ads.adConfig({
            preloadAdBreaks: "on",
            sound: "off",
            onReady: () => {
                console.log("onReady");
            },
        });


      
        if(gGame.isBanner){
            const adBanner = document.getElementById("ad-banner");
            ads.adUnit({
            el: adBanner,
            fullWidthResponsive: "true",
            style: "display:inline-block;width:100%; margin-top: 5px",
        });
        }
     

        window.h5_sdk = {
       
            adIntervalTime: 45,
            adShowTime: (new Date()).getTime(),
            
            getClientHeight: function() {
                return document.body.clientHeight && document.documentElement.clientHeight ? document.body.clientHeight < document.documentElement.clientHeight ? document.body.clientHeight : document.documentElement.clientHeight : document.body.clientHeight > document.documentElement.clientHeight ? document.body.clientHeight : document.documentElement.clientHeight
            },
            /**
             *
             * @param {*} ad_type
             * @param {*} success
             * @param {*} failed
             */
            showAd: function (ad_type, success = null, failed = null) {
                switch (ad_type) {
                    case 'Interstitial':
                        this.showInterstitialAd(success);
                        break;
    
                    case 'Reward':
                        this.showRewardAd(success, failed);
                        break;
    
                    default:
                        break;
                }
            },
           
            /**
             *
             * @param {*} success
             */
            showInterstitialAd: function (success) {
                let  lastShowAdTime = ((new Date()).getTime() - this.adShowTime) / 1000;
                console.log(lastShowAdTime);
                if (lastShowAdTime > this.adIntervalTime) {
                   
                    console.log('==== h5_sdk showInterstitialAd ====');
                    this.adShowTime = (new Date()).getTime();
                    ads.adBreak && ads.adBreak({
                        type: "next",
                        name: "next",
                        adBreakDone: () => {
                            success && success();
                        },
                    });
                } else {
                    success && success();
                }
            },
            /**
             *
             * @param {*} success
             * @param {*} failed
             */
            showRewardAd: function (success, failed) {  
                console.log('==== h5_sdk showRewardAd ====');
                ads.adBreak({
                    type: "reward",
                    beforeReward(showAdFn) {
                        // 处理广告播放前的逻辑，例如暂停游戏
                        console.log("beforeReward");
                        showAdFn();
                    },
                    adDismissed: () => {
                        // 被告知广告已被用户关闭，并且没有达到奖励条件
                        console.log("adDismissed");
                        failed && failed();
                    },
                    adViewed: () => {
                        // 被告知广告已被用户观看，并且达到奖励条件
                        console.log("adViewed");
                        success && success();
                    },
                    adBreakDone: (placementInfo) => {
                        // 处理剩余逻辑，是否发放奖励，并恢复游戏状态
                        console.log("adBreakDone", placementInfo);
                        if (placementInfo.breakStatus !== "viewed") {
                                failed && failed();
                        }
                    },
                });
            },
       
            showGameLoadingCompleted: function () {
             window.loading.hide();
             runtime.loadFinished();
             if (!window.isUploadCY)
                try {
                    console.log("----uploadCYLoadComplete----");
                    window.isUploadCY = !0;
                    ads.adBreak({
                        type: "preroll",
                        name: "my_preroll",
                        adBreakDone: () => {},// 也不要在这里初始化游戏，因为用户不关闭广告，则游戏无法初始化！！！
                    });
                } catch (e) {}
               
            },
    
            getGameName: function() {
                let pathNameArr = window.location.pathname.split('/');
                let gameNameIndex = pathNameArr.length > 3 ? 3 : 1;
                return pathNameArr[gameNameIndex];
            }
        };

    </script>
    

    </body>
</html>
